import React, { useState } from 'react';
import { 
  Scale, 
  Megaphone, 
  Leaf, 
  TestTube, 
  ArrowRight, 
  TrendingUp, 
  Globe, 
  ShieldCheck, 
  BarChart3, 
  AlertCircle, 
  CheckCircle2, 
  Info,
  MousePointerClick,
  Lightbulb
} from 'lucide-react';

// --- Componentes de UI Reutilizáveis ---

const Card = ({ children, className = "" }) => (
  <div className={`bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ${className}`}>
    {children}
  </div>
);

const Badge = ({ children, color = "blue" }) => {
  const colors = {
    blue: "bg-blue-100 text-blue-800",
    green: "bg-green-100 text-green-800",
    purple: "bg-purple-100 text-purple-800",
    orange: "bg-orange-100 text-orange-800",
    red: "bg-red-100 text-red-800",
    indigo: "bg-indigo-100 text-indigo-800",
  };
  return (
    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold uppercase tracking-wide ${colors[color] || colors.blue}`}>
      {children}
    </span>
  );
};

const SectionHeader = ({ title, description, icon: Icon, badge }) => (
  <div className="mb-8 max-w-4xl">
    {badge && <div className="mb-3"><Badge color="indigo">{badge}</Badge></div>}
    <div className="flex items-center gap-3 mb-3">
      {Icon && <div className="p-2 bg-slate-100 rounded-lg"><Icon className="w-6 h-6 text-slate-700" /></div>}
      <h2 className="text-2xl md:text-3xl font-bold text-slate-800">{title}</h2>
    </div>
    <p className="text-slate-600 text-lg leading-relaxed border-l-4 border-slate-200 pl-4">
      {description}
    </p>
  </div>
);

// --- Dados do Relatório ---

const trendsData = [
  {
    from: "Estático",
    to: "Adaptativo",
    desc: "De limites fixos para políticas vivas que evoluem com dados em tempo real.",
    example: "Ex: IA monitorando riscos financeiros e alimentares.",
    icon: <TrendingUp className="w-5 h-5" />
  },
  {
    from: "Produto",
    to: "Impacto",
    desc: "A medição muda de 'o que tem no alimento' para 'qual o impacto na saúde'.",
    example: "Ex: Dieta de Saúde Planetária (EAT-Lancet).",
    icon: <Globe className="w-5 h-5" />
  },
  {
    from: "Mandatos",
    to: "Colaboração",
    desc: "Governos e startups criando leis juntos em ambientes de teste seguros.",
    example: "Ex: 'Sandboxes' regulatórios para carne cultivada.",
    icon: <ArrowRight className="w-5 h-5" />
  },
  {
    from: "Relatórios",
    to: "Tempo Real",
    desc: "Fim das auditorias anuais em papel; início do rastreamento digital contínuo.",
    example: "Ex: Passaportes Digitais de Produtos (DPP).",
    icon: <CheckCircle2 className="w-5 h-5" />
  },
  {
    from: "Informação",
    to: "Influência",
    desc: "De rótulos passivos para incentivos fiscais e comportamentais ativos.",
    example: "Ex: 'Nudges' e impostos inteligentes.",
    icon: <Megaphone className="w-5 h-5" />
  }
];

const clustersData = {
  access: {
    title: "Acesso e Políticas Fiscais",
    icon: <Scale className="w-6 h-6" />,
    color: "blue",
    summary: "Como o dinheiro público e os impostos estão redesenhando o prato do consumidor.",
    description: "Este pilar foca em ferramentas econômicas. Os governos estão migrando de apenas 'combater a fome' para 'garantir nutrição de qualidade', taxando o que faz mal e subsidiando o que faz bem.",
    stats: [
      { label: "Leis Alimentares (2015-2025)", value: "5.873", desc: "Novas regulações criadas globalmente" },
      { label: "Taxa na Colômbia", value: "20%", desc: "Imposto sobre ultraprocessados e bebidas açucaradas" }
    ],
    insights: [
      "Mudança de foco: De calorias totais para densidade nutricional.",
      "Expansão Global: Impostos sobre açúcar (Sugar Taxes) chegando ao Reino Unido e Emirados Árabes.",
      "Subsídios Inteligentes: Dinamarca atingindo 13-14% de market share orgânico via incentivos.",
      "Restrições Escolares: Proibições de venda de ultraprocessados (Rio de Janeiro, México)."
    ]
  },
  marketing: {
    title: "Marketing e Transparência",
    icon: <Megaphone className="w-6 h-6" />,
    color: "orange",
    summary: "As novas regras de comunicação para proteger vulneráveis e garantir a verdade.",
    description: "Com o aumento da obesidade infantil e do greenwashing, a regulação está impondo clareza. O foco é garantir que o consumidor entenda o que está comprando em segundos.",
    stats: [
      { label: "Chile", value: "Pioneiro", desc: "Criador dos octógonos pretos de alerta" },
      { label: "Alvo da Vez", value: "IA & Influencers", desc: "Leis exigindo transparência em anúncios gerados por IA" }
    ],
    insights: [
      "Alertas Visuais: Expansão dos rótulos frontais (Front-of-Pack) na América Latina.",
      "Regulação Digital: Controle sobre 'Food Health Coaches' artificiais.",
      "Scores Simplificados: Sistemas como Nutri-Score (A a E) ganhando força na Europa.",
      "Lei Digital: Transparência radical exigida pela Lei de Serviços Digitais da UE."
    ]
  },
  climate: {
    title: "Clima e Sustentabilidade",
    icon: <Leaf className="w-6 h-6" />,
    color: "green",
    summary: "Conectando o garfo à fazenda para salvar o planeta.",
    description: "A sustentabilidade deixou de ser voluntária para ser mandatória. A rastreabilidade total da cadeia de suprimentos é a nova norma para acessar mercados globais.",
    stats: [
      { label: "Impacto Global", value: "Lei EUDR", desc: "Lei de Desmatamento da UE afeta soja, café e cacau" },
      { label: "Meta Espanha", value: "-30%", desc: "Redução obrigatória de desperdício no varejo" }
    ],
    insights: [
      "Passaportes Digitais: Obrigatoriedade de rastreio digital (DPPs).",
      "Quem Paga a Conta: Responsabilidade Estendida do Produtor (EPR) pelo descarte.",
      "Saúde Planetária: Links diretos entre dietas saudáveis e redução de emissões.",
      "Prova de Origem: Blockchain usado para comprovar 'desmatamento zero'."
    ]
  },
  novel: {
    title: "Novos Alimentos (Inovação)",
    icon: <TestTube className="w-6 h-6" />,
    color: "purple",
    summary: "Biotecnologia e proteínas alternativas: o futuro no laboratório.",
    description: "A inovação está correndo mais rápido que a lei. Países estão competindo para atrair foodtechs, criando vias rápidas de aprovação para garantir segurança nacional alimentar.",
    stats: [
      { label: "Investimento", value: "$18 Bi+", desc: "Em proteínas alternativas (2016-2025)" },
      { label: "Singapura", value: "9-12 Meses", desc: "Tempo recorde de aprovação vs 18-36 meses na UE" }
    ],
    insights: [
      "Corrida Espacial Alimentar: Países competindo por tecnologia de alimentos.",
      "Sandboxes: Ambientes de teste seguros (Reino Unido, Singapura).",
      "Segurança Nacional: Fermentação de precisão vista como estratégica.",
      "Colaboração: Indústria e governo definindo padrões de segurança juntos."
    ]
  }
};

const businessActions = [
  {
    title: "Colaboração Intersetorial",
    text: "Não espere a lei chegar. Forme coalizões pré-competitivas para definir padrões proativamente.",
    icon: <ShieldCheck className="w-6 h-6 text-indigo-200" />,
    bg: "bg-indigo-800"
  },
  {
    title: "Dados Abertos",
    text: "Compartilhe métricas de impacto com reguladores. Transparência acelera aprovações.",
    icon: <BarChart3 className="w-6 h-6 text-indigo-200" />,
    bg: "bg-indigo-800"
  },
  {
    title: "Transparência Radical",
    text: "Use a rastreabilidade como marketing. O consumidor confia no que entende.",
    icon: <Info className="w-6 h-6 text-indigo-200" />,
    bg: "bg-indigo-800"
  }
];

// --- Componentes da Aplicação ---

const Header = () => (
  <header className="bg-gradient-to-r from-slate-900 to-slate-800 text-white pt-10 pb-16 px-6 rounded-b-[3rem] shadow-xl mb-12 relative overflow-hidden">
    <div className="absolute top-0 right-0 w-96 h-96 bg-blue-500 rounded-full mix-blend-overlay filter blur-3xl opacity-10 animate-pulse"></div>
    <div className="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-start relative z-10">
      <div className="md:w-2/3">
        <div className="flex items-center gap-2 mb-4">
          <Badge color="blue">Relatório WEF & Accenture</Badge>
          <span className="text-slate-400 text-sm font-medium tracking-wide">Dezembro 2025</span>
        </div>
        <h1 className="text-4xl md:text-6xl font-extrabold mb-6 tracking-tight leading-tight">
          As Regras da <br/>
          <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300">
            Alimentação
          </span>
        </h1>
        <p className="text-slate-200 text-lg md:text-xl max-w-2xl leading-relaxed">
          Um guia interativo sobre como a regulação está deixando de ser uma barreira burocrática para se tornar a principal plataforma de inovação do futuro alimentar.
        </p>
      </div>
      <div className="mt-8 md:mt-0 hidden md:block">
        <div className="bg-white/10 backdrop-blur-md p-6 rounded-2xl border border-white/20 shadow-2xl transform rotate-3 hover:rotate-0 transition-transform duration-500">
          <p className="text-xs text-blue-200 uppercase tracking-widest font-bold mb-2">Pilares Centrais</p>
          <div className="space-y-2">
            <div className="flex items-center gap-2 text-white font-semibold"><CheckCircle2 className="w-4 h-4 text-green-400"/> Saúde Pública</div>
            <div className="flex items-center gap-2 text-white font-semibold"><CheckCircle2 className="w-4 h-4 text-green-400"/> Clima & Planeta</div>
            <div className="flex items-center gap-2 text-white font-semibold"><CheckCircle2 className="w-4 h-4 text-green-400"/> Economia Inovadora</div>
          </div>
        </div>
      </div>
    </div>
  </header>
);

const ClusterDetail = ({ data }) => {
  if (!data) return null;
  
  const colors = {
    blue: { bg: "bg-blue-50", text: "text-blue-800", icon: "text-blue-600", border: "border-blue-100" },
    green: { bg: "bg-green-50", text: "text-green-800", icon: "text-green-600", border: "border-green-100" },
    orange: { bg: "bg-orange-50", text: "text-orange-800", icon: "text-orange-600", border: "border-orange-100" },
    purple: { bg: "bg-purple-50", text: "text-purple-800", icon: "text-purple-600", border: "border-purple-100" }
  };

  const theme = colors[data.color];

  return (
    <div className="animate-fadeIn">
      {/* Cabeçalho do Card Interativo */}
      <div className={`p-6 md:p-8 rounded-2xl ${theme.bg} mb-8 border ${theme.border}`}>
        <div className="flex flex-col md:flex-row gap-6 items-start">
          <div className={`p-4 bg-white rounded-2xl shadow-sm ${theme.icon}`}>
            {React.cloneElement(data.icon, { className: "w-8 h-8" })}
          </div>
          <div>
            <h3 className={`text-2xl md:text-3xl font-bold ${theme.text} mb-3`}>
              {data.title}
            </h3>
            <p className="text-slate-700 text-lg leading-relaxed">
              {data.description}
            </p>
          </div>
        </div>
      </div>

      <div className="grid md:grid-cols-2 gap-8 mb-8">
        {/* Estatísticas */}
        <div className="space-y-4">
          <h4 className="flex items-center gap-2 font-bold text-slate-800 mb-4">
            <BarChart3 className="w-5 h-5 text-slate-400" />
            Dados em Destaque
          </h4>
          {data.stats.map((stat, idx) => (
            <div key={idx} className="bg-white p-5 rounded-xl border border-slate-100 shadow-sm hover:shadow-md transition-shadow flex items-center gap-5 group">
              <div className={`p-3 rounded-full ${theme.bg} group-hover:scale-110 transition-transform`}>
                <TrendingUp className={`w-6 h-6 ${theme.icon}`} />
              </div>
              <div>
                <div className="text-3xl font-bold text-slate-800">{stat.value}</div>
                <div className="text-xs font-bold text-slate-500 uppercase tracking-wider">{stat.label}</div>
                <div className="text-sm text-slate-600 mt-1">{stat.desc}</div>
              </div>
            </div>
          ))}
        </div>

        {/* Insights */}
        <div className="bg-slate-50 p-6 rounded-2xl border border-slate-200">
          <h4 className="flex items-center gap-2 font-bold text-slate-800 mb-5">
            <Lightbulb className="w-5 h-5 text-amber-500" />
            Principais Insights do Relatório
          </h4>
          <ul className="space-y-4">
            {data.insights.map((insight, idx) => (
              <li key={idx} className="flex items-start gap-3 text-slate-700 bg-white p-3 rounded-lg border border-slate-100 shadow-sm">
                <CheckCircle2 className={`w-5 h-5 ${theme.icon} flex-shrink-0 mt-0.5`} />
                <span className="text-sm md:text-base">{insight}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  );
};

export default function App() {
  const [activeTab, setActiveTab] = useState('access');

  return (
    <div className="min-h-screen bg-slate-50 font-sans text-slate-900 selection:bg-blue-200 pb-20">
      <Header />

      <main className="max-w-6xl mx-auto px-4 sm:px-6 space-y-24">
        
        {/* Seção 1: As 5 Grandes Mudanças */}
        <section>
          <SectionHeader 
            badge="Panorama Geral"
            title="Radar de Tendências: A Evolução da Regulação" 
            icon={TrendingUp}
            description="O relatório identifica cinco grandes mudanças estruturais. Não estamos apenas vendo novas leis, mas uma nova filosofia regulatória que se adapta em tempo real e busca impacto mensurável."
          />
          
          <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
            {trendsData.map((trend, idx) => (
              <Card key={idx} className="p-5 flex flex-col h-full bg-gradient-to-br from-white to-slate-50 border-t-4 border-t-blue-500 group cursor-default">
                <div className="flex items-center justify-between mb-4 text-slate-400 group-hover:text-blue-600 transition-colors">
                  {trend.icon}
                  <span className="text-xs font-semibold bg-slate-100 px-2 py-1 rounded text-slate-500">Tendência #{idx + 1}</span>
                </div>
                <div className="flex items-center gap-2 mb-3">
                  <span className="text-xs font-bold text-slate-500 uppercase">{trend.from}</span>
                  <ArrowRight className="w-3 h-3 text-slate-300" />
                  <span className="text-sm font-extrabold text-blue-700 uppercase bg-blue-50 px-2 py-0.5 rounded">{trend.to}</span>
                </div>
                <p className="text-slate-700 text-sm font-medium leading-relaxed mb-2">{trend.desc}</p>
                <p className="text-slate-500 text-xs italic mt-auto pt-2 border-t border-slate-100">{trend.example}</p>
              </Card>
            ))}
          </div>
        </section>

        {/* Seção 2: Deep Dive Interativo */}
        <section id="interactive-clusters" className="scroll-mt-8">
          <SectionHeader 
            badge="Exploração Interativa"
            title="Os 4 Pilares da Transformação" 
            icon={MousePointerClick}
            description="A regulação global não é uniforme; ela se divide em quatro grandes áreas de impacto. Utilize o painel abaixo para navegar por cada pilar e descobrir as estatísticas e insights específicos."
          />

          <div className="bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-200 ring-1 ring-slate-900/5">
            {/* Navegação por Abas - Estilizada como Controles */}
            <div className="bg-slate-50 border-b border-slate-200 p-2 md:p-4">
              <div className="flex items-center gap-2 mb-3 px-2">
                <span className="text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-1">
                  <MousePointerClick className="w-3 h-3" />
                  Clique nas abas para navegar
                </span>
              </div>
              <div className="flex flex-col sm:flex-row gap-2">
                {Object.keys(clustersData).map((key) => {
                  const isActive = activeTab === key;
                  const item = clustersData[key];
                  const activeClass = isActive 
                    ? "bg-white text-blue-700 shadow-md ring-1 ring-slate-200 scale-100 z-10" 
                    : "bg-transparent text-slate-500 hover:bg-slate-200 hover:text-slate-700";
                  
                  return (
                    <button
                      key={key}
                      onClick={() => setActiveTab(key)}
                      className={`flex-1 py-3 px-4 rounded-xl text-sm md:text-base font-bold transition-all duration-200 flex items-center justify-center gap-2 relative ${activeClass}`}
                    >
                      {item.icon}
                      <span>{item.title}</span>
                      {isActive && <span className="absolute -bottom-1 w-12 h-1 bg-blue-500 rounded-t-full"></span>}
                    </button>
                  );
                })}
              </div>
            </div>

            {/* Conteúdo da Aba Ativa */}
            <div className="p-2 md:p-4 bg-slate-50/50 min-h-[500px]">
              <ClusterDetail data={clustersData[activeTab]} />
            </div>
          </div>
        </section>

        {/* Seção 3: Estratégia Corporativa */}
        <section>
          <div className="bg-slate-900 rounded-[2.5rem] p-8 md:p-16 relative overflow-hidden shadow-2xl">
            {/* Elementos decorativos */}
            <div className="absolute top-0 right-0 w-[500px] h-[500px] bg-indigo-600 rounded-full mix-blend-overlay filter blur-[100px] opacity-30 transform translate-x-1/2 -translate-y-1/2"></div>
            <div className="absolute bottom-0 left-0 w-[300px] h-[300px] bg-blue-600 rounded-full mix-blend-overlay filter blur-[80px] opacity-20 transform -translate-x-1/3 translate-y-1/3"></div>
            
            <div className="relative z-10 max-w-4xl mx-auto text-center mb-16">
              <Badge color="indigo">Estratégia</Badge>
              <h2 className="text-3xl md:text-5xl font-bold text-white mt-6 mb-6 leading-tight">
                Da Conformidade à Inovação
              </h2>
              <p className="text-slate-300 text-lg md:text-xl leading-relaxed">
                Como os líderes de negócios devem reagir? O relatório sugere uma mudança de mentalidade: 
                deixar de ver a regulação como um obstáculo ("evitar multas") para vê-la como um 
                trampolim estratégico ("liderar a mudança").
              </p>
            </div>

            <div className="grid md:grid-cols-3 gap-8 relative z-10">
              {businessActions.map((action, idx) => (
                <div key={idx} className="bg-white/5 backdrop-blur-lg border border-white/10 p-8 rounded-2xl hover:bg-white/10 transition-colors duration-300">
                  <div className={`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 shadow-inner ${action.bg}`}>
                    {action.icon}
                  </div>
                  <h3 className="text-xl font-bold text-white mb-4">{action.title}</h3>
                  <p className="text-slate-400 leading-relaxed text-sm">
                    {action.text}
                  </p>
                </div>
              ))}
            </div>

            <div className="mt-16 text-center relative z-10">
              <div className="inline-block bg-slate-800/50 border border-slate-700 rounded-full px-8 py-4 backdrop-blur-sm">
                <p className="text-slate-300 italic font-medium flex flex-col md:flex-row items-center gap-2">
                  <span className="text-2xl text-blue-400">"</span>
                  A regulação é o diálogo entre o que a ciência diz que podemos fazer e o que a sociedade diz que devemos fazer.
                  <span className="text-2xl text-blue-400">"</span>
                </p>
                <div className="mt-2 text-xs font-bold text-blue-400 uppercase tracking-widest">
                  — Jack A. Bobo, Instituto Rothman (UCLA)
                </div>
              </div>
            </div>
          </div>
        </section>

      </main>

      <footer className="mt-24 border-t border-slate-200 bg-white py-12 text-center">
        <div className="max-w-4xl mx-auto px-6">
          <p className="text-slate-900 font-bold mb-2">Painel Interativo de Inteligência de Negócios</p>
          <p className="text-slate-500 text-sm mb-6">Baseado no relatório "Food Rules: Como a regulamentação está transformando o futuro da alimentação"</p>
          <div className="flex justify-center gap-4 text-xs text-slate-400 uppercase tracking-widest font-semibold">
            <span>WEF</span>
            <span>•</span>
            <span>Accenture</span>
            <span>•</span>
            <span>2025</span>
          </div>
        </div>
      </footer>
      
      <style>{`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.4s ease-out forwards;
        }
      `}</style>
    </div>
  );
}
